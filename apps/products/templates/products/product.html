{% extends "base.html" %}

{% block title %}{{ product.name }}{% endblock %}

{% block content %}

<div class="grid grid-cols-1 md:grid-cols-2 gap-10">

    <div>
        {% if product.image %}
            <img src="{{ product.image.url }}" class="w-full h-[420px] object-cover rounded-lg shadow">
        {% else %}
            <div class="w-full h-[420px] flex items-center justify-center bg-gray-200 rounded-lg">
                No Image
            </div>
        {% endif %}
    </div>

    <div class="flex flex-col">
        <h1 class="text-3xl font-bold mb-4">{{ product.name }}</h1>

        <div class="text-2xl text-green-600 font-semibold mb-4">
            ${{ product.price }}
        </div>

        <div class="text-gray-600 mb-6 leading-7">
            {{ product.description }}
        </div>

        <div class="mb-4">
            {% if product.stock > 0 %}
                <span class="text-sm text-green-600 font-medium">In Stock ({{ product.stock }})</span>
            {% else %}
                <span class="text-sm text-red-500 font-medium">Out of Stock</span>
            {% endif %}
        </div>

        {% if product.stock > 0 %}
        <form action="{% url 'cart:add_to_cart' product.id %}" method="post" class="flex items-center gap-4">
            {% csrf_token %}
            <input type="number"
                   name="quantity"
                   value="1"
                   min="1"
                   max="{{ product.stock }}"
                   class="border rounded p-2 w-20 text-center">

            <button class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded shadow">
                Add to Cart
            </button>
        </form>
        {% endif %}
    </div>

</div>

<hr class="my-10">

<h2 class="text-2xl font-bold mb-6">Customer Reviews</h2>

{% include "comments/comments_block.html" with object=product %}

{% endblock %}
